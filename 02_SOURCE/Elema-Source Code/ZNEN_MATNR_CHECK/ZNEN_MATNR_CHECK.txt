REPORT ZTEST_ARAI11 .

SELECT-OPTIONS DATUM FOR SY-DATUM.

TABLES : ZNEN002.
DATA : TL_ZNEN002 LIKE TABLE OF ZNEN002.
DATA : WL_ZNEN002 LIKE ZNEN002.
DATA : WL_EKPO LIKE EKPO.


SELECT * FROM ZNEN002
INTO TABLE TL_ZNEN002
WHERE ZANDT IN DATUM.

LOOP AT TL_ZNEN002 INTO WL_ZNEN002.
IF NOT WL_ZNEN002-ZZNO IS INITIAL
AND WL_ZNEN002-ZZNO+0(2) NE '49'.

SELECT SINGLE * FROM EKPO
INTO WL_EKPO
WHERE EBELN = WL_ZNEN002-ZZNO.

IF SY-SUBRC = 0.
IF WL_ZNEN002-MATNR NE WL_EKPO-MATNR.
WRITE : / WL_ZNEN002-WERKS,
WL_ZNEN002-MATNR,
WL_ZNEN002-ZANDT,
WL_EKPO-MATNR.
ENDIF.
ELSE.
WRITE : / '発注検索エラー' , WL_ZNEN002-ZZNO.
ENDIF.
ENDIF.
ENDLOOP.

WRITE : / 'チェックプログラム終了'.
