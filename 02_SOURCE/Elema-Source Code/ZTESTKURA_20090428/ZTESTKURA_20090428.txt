REPORT ZTESTKURA_20090428 .

DATA:V_AMOUNT TYPE YS0011-JTANKA,
V_RATE   TYPE VBKD-KURSK,
V_LOCAL  TYPE YS0011-JTANKA.

V_AMOUNT = '3.68'.
V_RATE   = '107.35'.

CALL FUNCTION 'CONVERT_TO_LOCAL_CURRENCY'
EXPORTING
*   CLIENT                  = SY-MANDT
DATE                    = SY-DATUM
FOREIGN_AMOUNT          = V_AMOUNT
FOREIGN_CURRENCY        = 'USD'
LOCAL_CURRENCY          = 'JPY'
RATE                    = V_RATE
TYPE_OF_RATE            = 'M'
READ_TCURR              = ' '
IMPORTING
*   EXCHANGE_RATE           =
*   FOREIGN_FACTOR          =
LOCAL_AMOUNT            = V_LOCAL
*   LOCAL_FACTOR            =
*   EXCHANGE_RATEX          =
*   FIXED_RATE              =
*   DERIVED_RATE_TYPE       =
EXCEPTIONS
NO_RATE_FOUND           = 1
OVERFLOW                = 2
NO_FACTORS_FOUND        = 3
NO_SPREAD_FOUND         = 4
DERIVED_2_TIMES         = 5
OTHERS                  = 6
.
IF SY-SUBRC = 0.
WRITE V_LOCAL.
ELSE.
WRITE 'ERR'.
ENDIF.
