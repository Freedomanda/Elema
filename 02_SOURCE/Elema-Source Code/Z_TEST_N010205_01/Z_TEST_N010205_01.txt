REPORT Z_TEST_N010205_01 .

* 使用テーブル
TABLES YK210. "請求データ
TABLES YK230. "仕入データ
TABLES YK410. "支払予定データ
TABLES LFA1.  "仕入先マスタ (一般セクション)
TABLES T001.  "会社コード
TABLES T001W. "プラント/支店
TABLES BSIK.  "会計管理: 仕入先の二次索引
TABLES BSAK.  "会計管理: 仕入先の二次索引 (決済明細)


* グローバル変数
* 2003/03/31 MOD-S
*DATA I_REPORT LIKE STANDARD TABLE OF YK01423010 WITH HEADER LINE.
DATA I_REPORT LIKE STANDARD TABLE OF YK01424010 WITH HEADER LINE.
* 2003/03/31 MOD-E
DATA W_WERKS TYPE XFELD.
DATA W_BUKRS TYPE XFELD.
DATA W_ZFBDT TYPE XFELD.
DATA W_NINNI(14) TYPE C VALUE '%'.              "2003/01/15 ADD
DATA W_NAME1 LIKE T001W-NAME1.                  "2003/01/15 ADD
* 2003/03/14 ADD-S
DATA W_MWDAT LIKE BSEG-WRBTR.            "税額
* 2003/03/14 ADD-E
* 選択画面
PARAMETERS P_BUKRS LIKE YK230-BUKRS MEMORY ID BUK. "会社コード
SELECT-OPTIONS S_LIFNR FOR YK230-LIFNR. "仕入先コード
SELECT-OPTIONS S_WERKS FOR YK230-WERKS MEMORY ID WRK. "プラント
*PARAMETERS P_ZFBDT LIKE YK230-ZFBDT OBLIGATORY. "締日
* 2003/03/18 DEL-S
*SELECT-OPTIONS S_HKONT1 FOR BSIK-HKONT. "前月残高
*SELECT-OPTIONS S_HKONT2 FOR BSIK-HKONT. "当月支払
* 2003/03/18 DEL-E
PARAMETERS P_EKORG LIKE LFM1-EKORG DEFAULT '1000'.
PARAMETERS P_BYPASS TYPE CHAR01. "バッファをバイパス



START-OF-SELECTION.

PERFORM F_JIKEI_GET.


*---------------------------------------------------------------------*
*       FORM f_jikei_get                                              *
*---------------------------------------------------------------------*
*       ........                                                      *
*---------------------------------------------------------------------*
FORM F_JIKEI_GET.
* ローカル変数定義
DATA LO_I TYPE I.

*2009/08/06 MOD:税コード追加
DATA LO_MWSKZ LIKE RSEG-MWSKZ.  "税コード

TYPES: BEGIN OF ST_YK230,
BELNR LIKE YK230-BELNR,
LIFNR LIKE YK230-LIFNR,
ZFBDT LIKE YK230-ZFBDT,
ZFBDT2 LIKE YK230-ZFBDT2,
KEKKBN LIKE YK230-KEKKBN,

END OF ST_YK230.
DATA I_YK230 TYPE STANDARD TABLE OF ST_YK230 WITH HEADER LINE.

* 仕入データ検索
*2009/08/06 MOD:取得項目に伝票番号・伝票明細追加
REFRESH I_YK230.



SELECT BELNR LIFNR ZFBDT ZFBDT2 KEKKBN
INTO   TABLE I_YK230
FROM   YK230
WHERE  KEKKBN = 3 OR KEKKBN = 5.

LOOP AT I_YK230 .
IF I_YK230-ZFBDT > I_YK230-ZFBDT2.
WRITE:/, I_YK230-BELNR, I_YK230-LIFNR, I_YK230-ZFBDT, I_YK230-ZFBDT2.
ENDIF.

ENDLOOP.



WRITE LO_I.
ENDFORM.
