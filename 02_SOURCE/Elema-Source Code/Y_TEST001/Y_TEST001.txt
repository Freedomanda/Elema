*&---------------------------------------------------------------------*
*& Report  Y_TEST001
*&
*&---------------------------------------------------------------------*
*&
*&
*&---------------------------------------------------------------------*

REPORT  Y_TEST001.

DATA:  REC_ORDER_HEADER_IN TYPE BAPISDHD1,
REC_ORDER_PARTNER TYPE BAPIPARNR,
REC_ORDER_ITEMS_IN TYPE BAPIITEMIN,
REC_MESSAGE TYPE BAPIRET2,
REC_RETURN TYPE BAPIRETURN.

DATA: TAB_MESSAGE TYPE TABLE OF BAPIRET2,
TAB_ORDER_ITEMS_IN TYPE TABLE OF BAPIITEMIN,
TAB_ORDER_PARTNERS TYPE TABLE OF BAPIPARNR.

START-OF-SELECTION.

REC_ORDER_HEADER_IN-DOC_TYPE = 'ZRE'.
REC_ORDER_HEADER_IN-SALES_ORG = '1000'.
REC_ORDER_HEADER_IN-DISTR_CHAN = '10'.
REC_ORDER_HEADER_IN-DIVISION = '10'.
REC_ORDER_HEADER_IN-SALES_GRP = '050'.
REC_ORDER_HEADER_IN-SALES_OFF = '0500'.
REC_ORDER_HEADER_IN-PURCH_NO_C = 'T-00001'.
REC_ORDER_HEADER_IN-PURCH_DATE = 20141015.
REC_ORDER_HEADER_IN-CURRENCY = 'JPY'.

REC_ORDER_PARTNER-PARTN_ROLE = 'AG'.
REC_ORDER_PARTNER-PARTN_NUMB = '0000016310'.
APPEND REC_ORDER_PARTNER TO TAB_ORDER_PARTNERS.
REC_ORDER_PARTNER-PARTN_ROLE = 'WE'.
REC_ORDER_PARTNER-PARTN_NUMB = '0000016310'.
REC_ORDER_PARTNER-PARTN_ROLE = 'PE'.
REC_ORDER_PARTNER-PARTN_NUMB = '00001341'.
APPEND REC_ORDER_PARTNER TO TAB_ORDER_PARTNERS.

REC_ORDER_ITEMS_IN-ITM_NUMBER = '000010'.
REC_ORDER_ITEMS_IN-MATERIAL = 'BY05-09S16L'.
REC_ORDER_ITEMS_IN-PLANT = 'P050'.
REC_ORDER_ITEMS_IN-REQ_QTY = 100.
REC_ORDER_ITEMS_IN-SALES_UNIT = 'ST'.
REC_ORDER_ITEMS_IN-REQ_DATE = 20141031.
REC_ORDER_ITEMS_IN-COND_VALUE = '500.00'.
REC_ORDER_ITEMS_IN-COND_P_UNT = '1.5'.
REC_ORDER_ITEMS_IN-REF_DOC = 'T-00001'.
REC_ORDER_ITEMS_IN-REF_DOC_IT = '000010'.
APPEND REC_ORDER_ITEMS_IN TO TAB_ORDER_ITEMS_IN.


CALL FUNCTION 'BAPI_SALESORDER_CREATEFROMDAT2'
EXPORTING
*   SALESDOCUMENTIN               =
ORDER_HEADER_IN               =  REC_ORDER_HEADER_IN
*   ORDER_HEADER_INX              =
*   SENDER                        =
*   BINARY_RELATIONSHIPTYPE       =
*   INT_NUMBER_ASSIGNMENT         =
*   BEHAVE_WHEN_ERROR             =
*   LOGIC_SWITCH                  =
TESTRUN                       =   'X'
*   CONVERT                       = ' '
* IMPORTING
*   SALESDOCUMENT                 =
TABLES
RETURN                        = TAB_MESSAGE
*   ORDER_ITEMS_IN                =
*   ORDER_ITEMS_INX               =
ORDER_PARTNERS                =   TAB_ORDER_PARTNERS
*   ORDER_SCHEDULES_IN            =
*   ORDER_SCHEDULES_INX           =
*   ORDER_CONDITIONS_IN           =
*   ORDER_CONDITIONS_INX          =
*   ORDER_CFGS_REF                =
*   ORDER_CFGS_INST               =
*   ORDER_CFGS_PART_OF            =
*   ORDER_CFGS_VALUE              =
*   ORDER_CFGS_BLOB               =
*   ORDER_CFGS_VK                 =
*   ORDER_CFGS_REFINST            =
*   ORDER_CCARD                   =
*   ORDER_TEXT                    =
*   ORDER_KEYS                    =
*   EXTENSIONIN                   =
*   PARTNERADDRESSES              =        .
.

LOOP AT TAB_MESSAGE INTO REC_MESSAGE.
WRITE:/ REC_MESSAGE-TYPE, REC_MESSAGE-ID,REC_MESSAGE-NUMBER ,
REC_MESSAGE-MESSAGE.
ENDLOOP.
