***---------------------------------------------------------------------
** (c) Copyright 1998 OptiSystems Solutions LTD. All Rights Reserved  **
***---------------------------------------------------------------------
*&---------------------------------------------------------------------*
*& Resource Limits Details. Details for SAP 4.x
*&                                                                     *
*&---------------------------------------------------------------------*
REPORT YMAWRK04.
*
PARAMETERS: P_INST LIKE YMA_PRC-APSERVER,
P_INDEX LIKE YMA_PRC-AD_INDX,
P_SCREEN LIKE YMA_SCREEN,
P_CYCLE LIKE YMA_INTERV-NO_CYCLE.
*
DATA: LOC_LSIND LIKE SY-LSIND,
L_CPAGE LIKE SY-CPAGE VALUE 1,
L_STARO LIKE SY-STARO VALUE 1,
L_STACO LIKE SY-STACO VALUE 1,
L_CUROW LIKE SY-CUROW VALUE 1,
L_CUCOL LIKE SY-CUCOL VALUE 1.
DATA: DIAREC LIKE PFDIAREC,
WPINFO LIKE WPINFO,
LOC_WPINFO LIKE WPINFO.
DATA: BEGIN OF WP_TABL OCCURS 0.
INCLUDE STRUCTURE WPINFO.
DATA: END OF WP_TABL.
DATA: TB_YMA_PRC LIKE YMA_PRC OCCURS 0 WITH HEADER LINE.
*
WRITE: /'Date: '(001),
P_SCREEN-LOC_DATUM,
' Instance: '(002),
P_SCREEN-INST_NAME,
' From: '(003),
P_SCREEN-RTSTART,
' to: '(004),
P_SCREEN-RTSTOP.
*
IMPORT TB_YMA_PRC FROM MEMORY ID 'TB_PRC'.
READ TABLE TB_YMA_PRC WITH KEY APSERVER = P_INST
RDATE = P_SCREEN-LOC_DATUM
NO_CYCLE = P_CYCLE
AD_INDX = P_INDEX.
IF SY-SUBRC IS INITIAL.
MOVE-CORRESPONDING TB_YMA_PRC TO LOC_WPINFO.
MOVE-CORRESPONDING TB_YMA_PRC TO DIAREC.
ELSE.
EXIT.
ENDIF.
*
CLEAR WP_TABL.
WP_TABL = LOC_WPINFO.
PERFORM YMA_DETAIL_INFO.
*
LOC_LSIND = SY-LSIND + 1.
SCROLL LIST INDEX LOC_LSIND TO:
PAGE L_CPAGE LINE L_STARO, COLUMN L_STACO.
SET CURSOR L_CUCOL L_CUROW.
CLEAR WP_TABL.
*&---------------------------------------------------------------------*
*&      Form  YMA_DETAIL_INFO
*&---------------------------------------------------------------------*
FORM YMA_DETAIL_INFO.
PERFORM WP_DETAIL_LIST_TOP(RSMON000).
CLEAR WPINFO.
PERFORM FILL_WPINFO(RSMON000) USING WPINFO
WP_TABL
2.
WPINFO-WP_IWAIT = WP_TABL-WP_IWAIT.
WPINFO-WP_SERVER = WP_TABL-WP_SERVER.
WPINFO-WP_WAITINF = WP_TABL-WP_WAITINF.
WPINFO-WP_WAITTIM = WP_TABL-WP_WAITTIM.
PERFORM WPSTAT_OUT(RSMON000) USING WPINFO DIAREC.
ENDFORM.                    " YMA_DETAIL_INFO
